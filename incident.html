<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Incident Tracking</title>
  <link rel="stylesheet" href="css/incident.css">
</head>
<body>

  <div class="sidebar">
    <div>
      <div class="logo">
        <img src="img/LOGO.png" alt="Logo" />
        <strong>SkinBloom</strong>
      </div>
      <nav>
        <ul>
          <li><span>🏠</span> <a href="regulatory.html">Dashboard</a></li>
          <li><span>🔍</span> <a href="audit.html">Audits</a></li>
          <li><span>⚠️</span> <a href="findings.html">Findings</a></li>
          <li><span>📁</span> <a href="documents.html">Documents</a></li>
          <li class="active"><span>🚩</span> <a href="incident.html">Incidents</a></li>
        </ul>
      </nav>
    </div>
    <div class="user" id="userSection">
      <span>👤</span>
      <div>
        <strong>Jasper John Dreo</strong>
        <small>Compliance</small>
      </div>
      <div class="logout-dropdown" id="logoutDropdown">
        <button class="logout-btn" onclick="logout()">🚪 Logout</button>
      </div>
    </div>
  </div>

  <div class="main-content">
    <header>
      <div>Incident Tracking</div>
      <svg class="bell-icon" viewBox="0 0 24 24">
        <path d="M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4a1.5 1.5 0 1 0-3 0v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
      </svg>
    </header>

    <div class="cards">
      <div class="card">
        <div class="card-content">
          <span>Open Incidents</span>
          <h3 id="cardOpen">0</h3>
        </div>
        <div class="card-icon-box blue">
          <img src="https://img.icons8.com/color/48/000000/error--v1.png" />
        </div>
      </div>
      <div class="card">
        <div class="card-content">
          <span>Critical Priority</span>
          <h3 id="cardCritical">0</h3>
        </div>
        <div class="card-icon-box red">
          <img src="https://img.icons8.com/color/48/000000/high-priority.png" />
        </div>
      </div>
      <div class="card">
        <div class="card-content">
          <span>In Progress</span>
          <h3 id="cardInProgress">0</h3>
        </div>
        <div class="card-icon-box yellow">
          <img src="https://img.icons8.com/color/48/000000/time-machine.png" />
        </div>
      </div>
      <div class="card">
        <div class="card-content">
          <span>Resolved</span>
          <h3 id="cardResolved">0</h3>
        </div>
        <div class="card-icon-box green">
          <img src="https://img.icons8.com/color/48/000000/checkmark--v1.png" />
        </div>
      </div>
    </div>

    <div class="table-container">
      <div class="section-header">
        <h2>Recent Incident Reports</h2>
        <div class="buttons">
          <button class="btn btn-filter">🔍 Filter</button>
          <button class="btn btn-reports">Reports</button>
        </div>
      </div>

      <table>
        <thead>
          <tr>
            <th>Incident Type</th>
            <th>Reported Date</th>
            <th>Status</th>
            <th>Severity</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="incident-table-body">
          <!-- Rows will be loaded by JavaScript -->
        </tbody>
      </table>
    </div>
  </div>
  
  <script src="notifications.js"></script>
  <script src="incident.js"></script>
 
  <!-- Filter Modal -->
  <div id="filterModal" class="modal" style="display: none;">
    <div class="modal-content styled-form">
      <div class="modal-header">
        <h3>🔍 Filter Incidents</h3>
        <button class="close-btn" type="button" onclick="closeFilterModal()">✕</button>
      </div>
      <form id="filterForm">
        <label>
          <span>Status</span>
          <select name="status">
            <option value="">Any</option>
            <option value="Open">Open</option>
            <option value="Investigating">Investigating</option>
            <option value="In Progress">In Progress</option>
            <option value="Resolved">Resolved</option>
          </select>
        </label>
        <label>
          <span>Severity</span>
          <select name="severity">
            <option value="">Any</option>
            <option value="Low">Low</option>
            <option value="Medium">Medium</option>
            <option value="High">High</option>
            <option value="Critical">Critical</option>
          </select>
        </label>
        <div class="modal-buttons">
          <button type="button" class="cancel-btn" onclick="resetIncidentFilters()">Reset</button>
          <button type="submit" class="upload-btn">Apply Filters</button>
        </div>
      </form>
    </div>
  </div>
 
   <!-- View Incident Modal -->
   <div id="viewIncidentModal" class="modal" style="display: none;">
     <div class="modal-content styled-form">
       <div class="modal-header">
         <h3>Incident Details</h3>
         <button class="close-btn" type="button" onclick="closeViewModal()">✕</button>
       </div>
       <p><strong>Incident Type:</strong> <span id="viewIncidentType"></span></p>
       <p><strong>Date Reported:</strong> <span id="viewDateReported"></span></p>
       <p><strong>Status:</strong> <span id="viewStatus"></span></p>
       <p><strong>Severity:</strong> <span id="viewSeverity"></span></p>
       <p><strong>Department:</strong> <span id="viewDepartment"></span></p>
       <p><strong>Description:</strong> <span id="viewDescription"></span></p>
       <p><strong>Evidence:</strong> <span id="viewEvidence"></span></p>
       <div class="modal-buttons">
         <button type="button" class="cancel-btn" onclick="closeViewModal()">Close</button>
         <button type="button" class="upload-btn" id="sendToRiskBtn">Send to Risk</button>
       </div>
     </div>
   </div>
 
   <!-- Edit Status Modal -->
   <div id="editStatusModal" class="modal" style="display: none;">
     <div class="modal-content styled-form">
       <div class="modal-header">
         <h3>Update Incident Status</h3>
         <button class="close-btn" type="button" onclick="closeEditModal()">✕</button>
       </div>
       <form id="editStatusForm">
         <label>
           <span>Status</span>
           <select name="status">
             <option value="Open">Open</option>
             <option value="Investigating">Investigating</option>
             <option value="In Progress">In Progress</option>
             <option value="Resolved">Resolved</option>
           </select>
         </label>
         <div class="modal-buttons">
           <button type="button" class="cancel-btn" onclick="closeEditModal()">Cancel</button>
           <button type="submit" class="upload-btn">Save</button>
         </div>
       </form>
     </div>
   </div>

</body>
</html>